<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Invitaci√≥n Baby Shower - Maileny</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<style>
 

/* Quitar fondo y bordes fantasma en im√°genes */
img{
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
}

/* Si est√°n dentro de tarjetas */
.card-section img,
.gallery img,
.floating-img{
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}


/* ‚ú® GLOW activo al reproducirse */
.parents-video.glow{
  box-shadow:
    0 0 25px rgba(255,182,193,.6),
    0 0 45px rgba(255,105,180,.5),
    0 0 70px rgba(255,20,147,.4);
  animation:glowPulse 2.5s infinite ease-in-out;
}

@keyframes glowPulse{
  0%{ box-shadow:0 0 20px rgba(255,182,193,.5); }
  50%{ box-shadow:0 0 65px rgba(255,105,180,.8); }
  100%{ box-shadow:0 0 20px rgba(255,182,193,.5); }
}

.video-hint{
  text-align:center;
  font-size:.9rem;
  opacity:.7;
  margin-top:8px;
}
 

/* ===============================
   üìç UBICACI√ìN ‚Äì AJUSTE PERFECTO
   =============================== */

.ubicacion .meta{
  text-align:center;
  margin-bottom:6px;
  font-size:1.1rem;
  color:#8a5b7a;
}

.mapa-container{
  margin:0 auto;
  padding:0;
  line-height:0; /* elimina espacio invisible */
  border-radius:18px;
  overflow:hidden;
  background:#fff;
}

/* ‚ú® BORDE DORADO GLOW */
.glow-gold{
  position:relative;
  box-shadow:
    0 0 0 2px rgba(212,175,55,0.9),
    0 0 18px rgba(212,175,55,0.6),
    0 0 35px rgba(255,215,100,0.4);
  animation: goldPulse 3s infinite ease-in-out;
}

@keyframes goldPulse{
  0%,100%{
    box-shadow:
      0 0 0 2px rgba(212,175,55,0.9),
      0 0 18px rgba(212,175,55,0.6),
      0 0 35px rgba(255,215,100,0.4);
  }
  50%{
    box-shadow:
      0 0 0 2px rgba(255,215,100,1),
      0 0 25px rgba(255,215,100,0.8),
      0 0 45px rgba(255,230,150,0.6);
  }
}

/* Enlace Google Maps */
.link-maps{
  text-align:center;
  margin-top:12px;
}

.link-maps a{
  font-size:1.15rem;
  color:#d4af37;
  font-weight:bold;
  text-decoration:none;
}


 
:root{
  --bg-1: #fddbee; --bg-2:#ffdfec; --accent:#ffe6f0; --gold:#b68a59; --muted:#6b4a4a;
  --glass: rgba(255,255,255,0.7);
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Inter, 'Segoe UI', Times New Roman, Bell MT, sans-serif;color:var(--muted);
  background: linear-gradient(180deg,var(--bg-1),var(--bg-2));-webkit-font-smoothing:antialiased;overflow-x:hidden}
.container{max-width:1100px;margin:18px auto;padding:18px}
.card{background:linear-gradient(180deg, rgba(255, 230, 245, 0.952), rgba(255,255,255,0.75));
  border-radius:20px;padding:26px;box-shadow:0 14px 40px rgba(0,0,0,0.08);position:relative;overflow:visible}
.header-row{display:flex;gap:20px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.title{font-family:'Brush Script MT',cursive;font-size:48px;color:var(--gold);margin:0}
.lead{margin:6px 0 0;font-size:16px}
.invite-image{width:320px;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,0.09)}
.info{min-width:260px}
.meta{color:#5a3f3f}
.date-pill{display:inline-block;background:var(--glass);padding:10px 14px;border-radius:12px;margin-right:8px}
.controls{display:flex;gap:10px;margin-top:14px}
.btn{background:var(--gold);color:rgb(252, 222, 248);border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
.btn.ghost{background:transparent;border:2px solid var(--gold);color:var(--gold)}

/* premium accents */
.ribbon{position:absolute;right:24px;top:-10px;background:linear-gradient(90deg,#ffd7e6,#ffcde8);padding:8px 14px;border-radius:12px;font-weight:700;color:#6b3b3b;box-shadow:0 6px 18px rgba(0,0,0,0.06)}

/* animals */
.animal{position:absolute;z-index:6;cursor:pointer;border-radius:12px;box-shadow:0 8px 18px rgba(0,0,0,0.08);transition:transform .4s,filter .3s}
.animal.small{width:80px}
.animal.med{width:100px}
.animal.lg{width:130px}
@keyframes floatA{0%{transform:translateY(0)}50%{transform:translateY(-20px)}100%{transform:translateY(0)}}
@keyframes floatB{0%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-22px) rotate(4deg)}100%{transform:translateY(0) rotate(0deg)}}
@keyframes floatC{0%{transform:translateY(0) scale(1)}50%{transform:translateY(-12px) scale(1.03)}100%{transform:translateY(0) scale(1)}}
@keyframes bounce{0%{transform:translateY(0)}30%{transform:translateY(-26px)}60%{transform:translateY(-6px)}100%{transform:translateY(0)}}

/* float utility class used to restart animations */
.float { animation-play-state: running; }

/* globos  */
#balloons{position:fixed;inset:0;pointer-events:none;z-index:20}
.balloon{position:absolute;border-radius:50%;opacity:.95;box-shadow:inset -6px -10px 20px rgba(255,255,255,0.18)}

/* confetti */
.confetti{position:fixed;pointer-events:none;z-index:9999}
@keyframes confFall{to{transform:translateY(110vh) rotate(360deg);opacity:0.2}}

/* layout sections */
.grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:20px}
.card-section{background:rgba(255,255,255,0.8);padding:16px;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.04)}
.section-title{font-weight:700;margin-bottom:8px;color:var(--gold)}
.input,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)}
.gallery{display:flex;gap:8px;overflow:auto}
.gallery img{height:140px;border-radius:10px;cursor:pointer}
.map{height:220px;border-radius:12px;overflow:hidden}

/* reveal */
.reveal{opacity:0;transform:translateY(10px);transition:opacity .7s,transform .7s}
.reveal.visible{opacity:1;transform:none}

/* audio prompt */
#audio-prompt{position:fixed;left:12px;bottom:12px;background:linear-gradient(90deg,#fff,#ffeef6);padding:10px 14px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.12);z-index:1000}

/* lightbox */
#lightbox{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.85);z-index:10000}
#lightbox img{max-width:90%;max-height:90%;border-radius:20px;box-shadow:0 0 30px rgba(255, 160, 206, 0.8);animation:zoomIn .4s ease}
@keyframes zoomIn{from{transform:scale(.98);opacity:0}to{transform:scale(1);opacity:1}}

/* small responsive */
@media(max-width:800px){.grid{grid-template-columns:1fr}.title{font-size:34px}.invite-image{width:220px}}

/* contenido  */
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <div class="ribbon">Baby Shower</div>
    <div class="header-row">
      <div class="info">
        <h1 class="title">Nan Mena Mailany Estrada Bravo</h1>
        <p class="lead">¬°Nuestra princesa llegar√° muy pronto!<br>Te invitamos a celebrar con nosotros. üéÄ</p>
       <h2> <p class="title">Padres:<br>Armando Estrada SanchezüéÄ <br>Miriam Themis Alonso BravoüéÄ</p></h2>

        <div style="margin-top:10px">
          <span class="date-pill">S√°bado</span>
          <span class="date-pill" id="event-date-pill">7 Feb 2026 ‚Ä¢ 7:00 PM</span>
        </div>

        <div class="controls">
          <button class="btn" id="rsvp-btn">Confirmar asistencia</button>
         
          <!-- boton descarga id esperado por JS -->
          <button class="btn ghost" id="download-pdf">Descargar</button>
        </div>
      </div>

      <img class="invite-image" src="Conejos img/invitacion.png" alt="Mailany" />
    </div>

    <!-- animales -->
    <img class="animal lg animalito" id="a1" src="Conejos img\patitas.png" style="top:8%;left:20%;animation:floatA 6s ease-in-out infinite">
    <img class="animal med animalito" id="a2" src="Conejos img\conejoB1.png" style="top:16%;right:36%;animation:floatB 7s ease-in-out infinite">
    <img class="animal small animalito" id="a3" src="Conejos img\patitas.png" style="top:36%;left:10%;animation:floatC 5s ease-in-out infinite">
    <img class="animal med animalito" id="a4" src="Conejos img\bloques.png" style="bottom:8%;right:12%;animation:floatA 6.5s ease-in-out infinite">
    <img class="animal small animalito" id="a5" src="Conejos img\conejoB6.png" style="bottom:22%;left:35%;animation:floatB 6.2s ease-in-out infinite">
    <img class="animal lg animalito" id="a6" src="Conejos img\conejoB5.png" style="top:30%;left:60%;animation:floatC 8s ease-in-out infinite">
    <img class="animal lg animalito" id="a7" src="Conejos img\conejoB7.png" style="top:45%;left:40%;animation:floatC 8s ease-in-out infinite">

    <!-- Duenta regresiva -->
    <div class="grid" style="margin-top:24px">
      <div class="card-section reveal">
        <div class="section-title">Cuenta regresiva</div>
        <div id="countdown-large" style="font-size:20px;font-weight:700">Calculando...</div>
      </div>
         <!-- Ubicaci√≥n -->

      <!-- üìç UBICACI√ìN -->
<div class="card-section reveal ubicacion">

  <div class="section-title">Ubicaci√≥n</div>
  <h2><p class="meta">Colonia San Isidro, Calle Norte 5</p> </h2>

  <div class="mapa-container glow-gold">
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d150.00000000000003!2d-98.929194!3d19.287722!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses!2smx!4v1732490000000"
      width="100%"
      height="260"
      style="border:0;"
      loading="lazy"
      allowfullscreen>
    </iframe>
  </div>

  <div class="link-maps">
    <a href="https://maps.google.com/?q=19.287722,-98.929194" target="_blank">
      Abrir en Google Maps
    </a>
  </div>

</div>

        <!-- Mapa embed alternativo din√°mico -->
        <div id="dynamic-map" style="margin-top:8px"></div>
      </div>

      <!-- lista de regalos -->
      <div class="card-section reveal">
        <div class="section-title">Lista de regalos</div>
        <ul>
          <li>¬°Tu presencia es lo m√°s importante, pero agradecer√≠amos si pudieras traer algo de la siguiente lista o algo de tu preferencia!</li>
          <li>Paquetes de pa√±ales y toallitas h√∫medas</li>
          <li>Ropita de √±i√±a 0-3 meses</li>
          <li>Muselinas, mantas suaves o cobijas ligeras</li>
          <li>Set de higiene para beb√©</li>
          <li>Set de biberones o chupetes</li>
          <li>Bolso o pa√±alera de maternidad</li>
          <li>Coj√≠n de lactancia</li>
          <li>Alfombra de juegos o gimnasio para beb√©</li>
          <li>Kit de cuidado y salud infantil</li>
          <li>Juguetes suaves o mordedores apropiados</li>
          <li>Un art√≠culo pr√°ctico o decorativo para la habitaci√≥n de la beb√©</li>
        </ul>
      </div>

      <!-- Mensajes para la mam√° -->
      <div class="card-section reveal">
        <div class="section-title">Mensaje para la mam√°</div>
        <textarea id="mensaje" placeholder="Escribe un mensaje de cari√±o" style="min-height:120px"></textarea>
        <button class="btn" id="send-msg" style="margin-top:8px">Enviar mensaje</button>
      </div>

      <!-- gallery-img que usa el lightbox -->
      <div class="card-section reveal" style="grid-column:1 / -1">
        <div class="section-title">Galer√≠a de los padres</div>
        <div class="gallery" id="parents-gallery">
          <img class="gallery-img floating-img" src="papas/pareja.jpg" alt="Familia" />
        <img class="gallery-img floating-img" src="papas/Papas1.jpg" alt="Padre" />
        <img class="gallery-img floating-img" src="papas/Papas2.jpg" alt="Madre" />
        <img class="gallery-img floating-img" src="papas/papas 3.jpg" alt="Padre" />
        <img class="gallery-img floating-img" src="papas/paps 4.jpg" alt="Madre" />
        <img class="gallery-img floating-img" src="papas/papas 5.jpg" alt="Padre" />
        </div>
      </div>

    </div>
  </div>
</div>

 


<div id="balloons"></div>
<div id="audio-prompt" style="display:none">Toca para activar sonido ‚ñ∂Ô∏è</div>

<!-- Dependencias externas necesarias (html2canvas, jspdf) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="" crossorigin="anonymous"></script>

<!-- Google Maps API Use callback=initMap -->
<script async defer src="https://maps.app.goo.gl/emnhq53GSHdc2F9P8"></script>

<script>
/* =========================================================
     UTILIDADES Y CONFIGURACI√ìN UNIFICADA
   ========================================================= */

// Helper: reproducir audio de forma segura (ignora errores de autoplay)
function tryPlayAudio(audio){
  if(!audio) return Promise.resolve();
  try {
    const p = audio.play();
    if(p && p.catch) p.catch(()=>{});
    return p;
  } catch(e) {
    return Promise.resolve();
  }
}

// --- Audio: optimizado (carga como blob) ---
const touchSound = new Audio('touch.mp3');
const ambient = new Audio();
ambient.loop = true;
ambient.volume = 0.45;

let audioUnlocked = false;
const audioPrompt = document.getElementById('audio-prompt');

async function loadOptimizedAudio(url){
  try {
    const response = await fetch(url);
    const blob = await response.blob();
    const obj = URL.createObjectURL(blob);
    ambient.src = obj;
  } catch(e){
    // Fallback: asigna directamente si fetch falla
    ambient.src = url;
  }
}
// Cargar audio ligero por defecto 
loadOptimizedAudio('\babyshawer\fondo.mp3').catch(()=>loadOptimizedAudio('\babyshawer\fondo.mp3'));

// Desbloqueo seguro de audio
function unlockAudio(){
  if(audioUnlocked) return;
  audioUnlocked = true;
  audioPrompt.style.display = 'none';
  tryPlayAudio(ambient);
}

// show prompt on load
window.addEventListener('load', ()=>{
  audioPrompt.style.display = 'block';
  audioPrompt.addEventListener('click', unlockAudio);
  // tocar una vez para desbloquear si el usuario interact√∫a en otra parte
  document.addEventListener('click', unlockAudio, {once:true});
  document.addEventListener('touchstart', unlockAudio, {once:true});
});

/* =========================================================
       GLOBOS Y CONFETTI
   ========================================================= */

const balloonsContainer = document.getElementById('balloons');

function randomInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

function createBalloon(i){
  const b = document.createElement('div');
  b.className = 'balloon';
  const size = randomInt(30,120);
  b.style.width = size + 'px';
  b.style.height = Math.round(size*1.15) + 'px';
  b.style.left = (Math.random()*100) + 'vw';
  b.style.top = (110 + Math.random()*20) + 'vh'; // start off-screen bottom
  b.style.background = `linear-gradient(135deg, rgba(255,${randomInt(160,220)},${randomInt(180,230)},1), rgba(255,${randomInt(200,230)},${randomInt(200,240)},1))`;
  b.style.opacity = 0.95;
  b.style.transition = `transform ${randomInt(8,18)}s linear, top ${randomInt(8,18)}s linear`;
  balloonsContainer.appendChild(b);
  // animate upward
  requestAnimationFrame(()=> {
    b.style.top = ( -randomInt(10,40) ) + 'vh';
    b.style.transform = `translateY(-${randomInt(20,60)}vh)`;
  });
  // cleanup
  setTimeout(()=> b.remove(), randomInt(9000,20000));
}

// generar 30 globos al entrar
function spawnBalloons(count=30){
  for(let i=0;i<count;i++){
    setTimeout(()=>createBalloon(i), randomInt(50,800)*i/10);
  }
}
spawnBalloons(30); // comportamiento deseado: 30 cada vez que se entra (puedes repetir si quieres)

/* Confetti (efecto en clic) */
function emitConfetti(x = window.innerWidth / 2, y = window.innerHeight / 2, amount = 40) {
  for (let i = 0; i < amount; i++) {
    const c = document.createElement('div');
    c.className = 'confetti';
    const size = randomInt(6, 14);
    c.style.width = size + 'px';
    c.style.height = (size * 0.6) + 'px';
    c.style.left = (x + randomInt(-100, 100)) + 'px';
    c.style.top = (y + randomInt(-40, 40)) + 'px';
    c.style.borderRadius = (Math.random() > 0.5 ? '2px' : '50%');
    c.style.transform = `rotate(${randomInt(0, 360)}deg)`;
    c.style.background = ['#ffd6e8', '#ffb6d2', '#ffcce3', '#ffdfee'][Math.floor(Math.random() * 4)];
    c.style.animation = `confFall ${randomInt(1800, 4000)}ms linear forwards`;
    c.style.zIndex = 9999;
    document.body.appendChild(c);
    setTimeout(() => c.remove(), randomInt(1900, 4200));
  }
}

//
// ‚≠ê NUEVO: lluvia de confeti desde arriba al entrar a la p√°gina
//
window.addEventListener("load", () => {
  const drops = 100; // cantidad de confeti inicial
  for (let i = 0; i < drops; i++) {
    const x = randomInt(0, window.innerWidth); // ancho total
    const y = randomInt(-200, -20);            // empieza fuera de la pantalla arriba
    emitConfetti(x, y, 1);                     // un confeti por posici√≥n
  }
});


/* =========================================================
   üñº LIGHTBOX + GALER√çA + ANIMACIONES PREMIUM + SECUENCIA
   ========================================================= */

// Lightbox
let lightbox;
function openLightbox(src){
  if(!lightbox){
    lightbox = document.createElement('div');
    lightbox.id = 'lightbox';
    lightbox.addEventListener('click', ()=> lightbox.remove());
    document.body.appendChild(lightbox);
  }
  lightbox.innerHTML = `<img src="${src}" alt="Imagen grande">`;
}

// seleccionar todas las im√°genes de la galer√≠a
const galleryImgs = document.querySelectorAll('.gallery-img');

galleryImgs.forEach(img=>{
  img.addEventListener('click', ()=> openLightbox(img.src));
});

// Hover glow y rebote premium
document.querySelectorAll('.floating-img, .animalito, .gallery-img').forEach(el => {
  el.style.transition = 'transform 0.25s ease, filter 0.35s ease, opacity 0.8s ease';
  el.addEventListener('mouseenter', ()=>{
    el.style.filter = 'drop-shadow(0 0 12px pink) brightness(1.08)';
    el.style.transform = 'scale(1.07)';
  });
  el.addEventListener('mouseleave', ()=>{
    el.style.filter = '';
    el.style.transform = '';
  });
});

/* Inyectar keyframes premiumBounce, float3D y fadeInOut */
(function injectPremiumAnim(){
  const premiumBounce = `@keyframes premiumBounce {
    0% { transform: translateY(0); }
    30% { transform: translateY(-18px); }
    60% { transform: translateY(6px); }
    100% { transform: translateY(0); }
  }`;

  const float3D = `@keyframes float3D {
    0% { transform: translateY(0) rotateZ(0deg); }
    50% { transform: translateY(-10px) rotateZ(1.5deg); }
    100% { transform: translateY(0) rotateZ(0deg); }
  }`;

  const fadeInOut = `@keyframes fadeInOut {
    0% { opacity: 0; transform: scale(0.9); }
    10% { opacity: 1; transform: scale(1); }
    90% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(0.9); }
  }`;

  const s = document.createElement('style');
  s.innerHTML = `${premiumBounce} ${float3D} ${fadeInOut}`;
  document.head.appendChild(s);

  // aplicar animaciones premium a TODO
  const elements = document.querySelectorAll('.animalito, .floating-img, .gallery-img');

  elements.forEach(el => {
    el.style.animation = (el.style.animation || '') + ' float3D 4s ease-in-out infinite';

    setTimeout(() => {
      el.style.animation += `, premiumBounce ${4 + Math.random() * 3}s ease-in-out infinite`;
    }, Math.random() * 500);
  });
})();

/* =========================================================
   üéû SECUENCIA DE IM√ÅGENES DE GALER√çA (UNA POR UNA)
   ========================================================= */

// inicia cuando la p√°gina carga
window.addEventListener("load", () => {
  if (galleryImgs.length === 0) return;

  let index = 0;

  // Oculta todas las im√°genes al iniciar
  galleryImgs.forEach(img => { img.style.opacity = 0; });

  function showNext(){
    // Ocultar todas
    galleryImgs.forEach(img => img.style.animation = '');

    // Mostrar solo la siguiente
    const current = galleryImgs[index];
    current.style.animation = "fadeInOut 3s ease forwards";

    index++;

    // Cuando termina la secuencia, mostrar todas juntas
    if(index >= galleryImgs.length){
      setTimeout(()=>{
        galleryImgs.forEach(img=>{
          img.style.opacity = 1;
          img.style.animation = "float3D 4s ease-in-out infinite, premiumBounce 5s ease-in-out infinite";
        });
      }, 3200);

      return;
    }

    // Mostrar siguiente despu√©s de 3 segundos
    setTimeout(showNext, 3000);
  }

  // Comenzar secuencia
  setTimeout(showNext, 800);
});


/* =========================================================
   üìÑ BOT√ìN DESCARGAR PDF (html2canvas + jsPDF)
   ========================================================= */

const pdfBtn = document.getElementById('pdf/invitacion.pdf');
if(pdfBtn){
  pdfBtn.addEventListener('click', async ()=>{
    // Indica visualmente que est√° creando el PDF
    pdfBtn.textContent = 'Generando PDF...';
    try{
      const element = document.body;
      // html2canvas
      const canvas = await html2canvas(element, {scale: 1.2, useCORS:true, allowTaint:true});
      const imgData = canvas.toDataURL('pdf/invitacion.pdf');
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF('p','mm','a4');
      const pageWidth = pdf.internal.pageSize.getWidth();
      const imgWidth = pageWidth;
      const imgHeight = (canvas.height * imgWidth) / canvas.width;
      pdf.addImage(imgData,'PNG',0,0,imgWidth,imgHeight);
      pdf.save('pdf/invitacion.pdf');
    }catch(e){
      console.error(e);
      alert('Error al generar PDF. Intenta usar otro navegador o revisar las im√°genes externas.');
    } finally {
      pdfBtn.textContent = 'Descargar';
    }
  });
}

/* =========================================================
   ‚è±Ô∏è CUENTA REGRESIVA
   ========================================================= */

function startCountdown(targetISO){
  const el = document.getElementById('countdown-large');
  if(!el) return;
  function update(){
    const now = new Date();
    const target = new Date(targetISO);
    const diff = target - now;
    if(diff <= 0){
      el.textContent = '¬°Hoy es la celebraci√≥n! üéâ';
      clearInterval(timer);
      return;
    }
    const days = Math.floor(diff / (1000*60*60*24));
    const hrs = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
    const min = Math.floor((diff % (1000*60*60)) / (1000*60));
    const sec = Math.floor((diff % (1000*60)) / 1000);
    el.textContent = `${days}d ${hrs}h ${min}m ${sec}s`;
  }
  update();
  const timer = setInterval(update, 1000);
}
// fecha objetivo: 7 feb 2026 19:00 (zona local)
startCountdown('2026-02-07T19:00:00');

/* =========================================================
   üêæ ANIMALES: interacci√≥n y mantener animaci√≥n tras clic
   ========================================================= */

const animals = document.querySelectorAll('.animal');
animals.forEach(a=>{
  // Reproducir sonido al tocar animal
  a.addEventListener('click', (ev)=>{
    // rebote visual
    a.style.animation = 'bounce .8s ease-out';
    // emitir confetti breve en la posici√≥n del animal
    const rect = a.getBoundingClientRect();
    emitConfetti(rect.left + rect.width/2, rect.top + rect.height/2, 18);
    tryPlayAudio(touchSound);
    // despu√©s del rebote restauramos la animaci√≥n de flotaci√≥n (reiniciarla)
    setTimeout(()=>{
      a.style.animation = ''; // limpia para forzar reflow
      // forzamos reflow
      void a.offsetWidth;
      // volver a asignar la animaci√≥n original si la ten√≠a inline
      const original = a.getAttribute('data-original-animation');
      if(original){
        a.style.animation = original;
      } else {
        // si no hab√≠a data-original, aplicamos una alternativa segura
        a.style.animation = 'floatA 6s ease-in-out infinite';
      }
    }, 820);
  });
  // almacenar animaci√≥n inicial para restaurarla m√°s tarde
  const initial = a.style.animation || '';
  if(initial) a.setAttribute('data-original-animation', initial);
});

/* =========================================================
   ‚úâÔ∏è Mensaje al enviar (simulaci√≥n)
   ========================================================= */
const sendMsgBtn = document.getElementById('send-msg');
if(sendMsgBtn){
  sendMsgBtn.addEventListener('click', ()=>{
    const txt = document.getElementById('mensaje').value.trim();
    if(!txt){ alert('Escribe un mensaje antes de enviar.'); return; }
    // aqu√≠ puedes POSTear a tu servidor; por ahora simulamos √©xito
    alert('Mensaje enviado. ¬°Gracias!');
    document.getElementById('mensaje').value = '';
  });
}

/* =========================================================
   ‚ú® TRANSICIONES ENTRE SECCIONES (IntersectionObserver)
   ========================================================= */

const sections = document.querySelectorAll('.reveal');
const observer = new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting) entry.target.classList.add('visible');
  });
},{ threshold: 0.18 });
sections.forEach(sec=> observer.observe(sec));

/* =========================================================
   üéõÔ∏è ELEMENTOS INTERACTIVOS VARIOS (RSVP, clicks globales)
   ========================================================= */

document.getElementById('rsvp-btn')?.addEventListener('click', ()=>{
  const name = prompt('¬øTu nombre para confirmar asistencia?');
  if(name) alert(`Gracias ${name}. ¬°Te esperamos!`);
});

// reproducir un toque corto cuando el usuario pasa por la galer√≠a
document.querySelectorAll('.floating-img').forEach(img=>{
  img.addEventListener('click', ()=>{
    // reactivar la animaci√≥n de flotaci√≥n si la hay
    img.classList.remove('float');
    void img.offsetWidth;
    img.classList.add('float');
    tryPlayAudio(touchSound);
  });
});

/* =========================================================
   üß© Inicializaciones finales
   ========================================================= */

// un peque√±o evento para generar confetti al presionar una tecla (para demo)
document.addEventListener('keydown', (e)=>{
  if(e.key === 'c' || e.key === 'C') emitConfetti(window.innerWidth/2, window.innerHeight/4, 80);
});

// Mostrar instrucci√≥n si audioLocked
if(!audioUnlocked) audioPrompt.style.display = 'block';

/* Fin del script unificado */
</script>

<script>
  // Descargar PDF actualizado
  document.getElementById("download-pdf").addEventListener("click", function () {
    const link = document.createElement("a");
    link.href = "pdf/invitacion.pdf"; // Nuevo nombre del PDF
    link.download = "Invitaci√≥n.pdf"; // Nombre sugerido al descargar
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }); 

</script>



<!-- ======================================================
     üì® PANTALLA DE INICIO CON SOBRE 3D + POP + CONFETI ROSA
     ====================================================== -->
<style>
  #pantalla-inicio{
    position: fixed;
    inset: 0;
    background: linear-gradient(180deg,#ffebf6,#ffd8ea);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999999999;
    transition: opacity .8s ease;
    overflow: hidden;
    perspective: 1200px;
  }

  #sobre-contenedor{
    position: relative;
    width: 260px;
    height: 200px;
    cursor: pointer;
    transform-style: preserve-3d;
    transition: transform .6s ease;
  }
  
  #sobre-cerrado, #sobre-abierto{
    position: absolute;
    width: 100%;
    height: auto;
    left: 0;
    top: 0;
    backface-visibility: hidden;
  }

  #sobre-abierto{
    transform: rotateX(-180deg);
  }

  /* Confeti */
  .confeti{
    position: fixed;
    width: 12px;
    height: 12px;
    background: #ffb6d9;
    border-radius: 50%;
    pointer-events: none;
    animation: caer 1.5s linear forwards;
    z-index: 999999999;
  }

  @keyframes caer {
    0% {transform: translateY(0) scale(1);}
    100% {transform: translateY(350px) scale(0.6); opacity: 0;}
  }
</style>

<div id="pantalla-inicio">
  <div id="sobre-contenedor">
    <img id="sobre-cerrado" src="Conejos img/conejoB3.png">
    <img id="sobre-abierto" src="Conejos img/conejoB3.png">
  </div>

  <!-- Audio pop -->
  <audio id="pop-audio" src="elementos/fondo.mp3" preload="auto"></audio>
</div>

<script>
  const inicio = document.getElementById("pantalla-inicio");
  const abierto = document.getElementById("sobre-abierto");
  const cerrado = document.getElementById("sobre-cerrado");
  const sobre = document.getElementById("sobre-contenedor");
  const pop = document.getElementById("pop-audio");

  let abiertoFlag = false;

  // Generar confeti rosa
  function lanzarConfeti(){
    for(let i = 0; i < 40; i++){
      const c = document.createElement("div");
      c.classList.add("confeti");
      c.style.left = (window.innerWidth/2 + (Math.random()*200 - 100))+"px";
      c.style.top  = (window.innerHeight/2)+"px";

      // Colores rosados aleatorios
      const tonos = ["#ff8fc7","#ffb6d9","#ffcee6","#e68bb6","#ffc1da"];
      c.style.background = tonos[Math.floor(Math.random()*tonos.length)];

      // Tama√±os y formas
      const formas = ["50%", "0%", "20% 50%", "50% 20%"]; // c√≠rculo, cuadrado, coraz√≥n-ish
      c.style.borderRadius = formas[Math.floor(Math.random()*formas.length)];

      document.body.appendChild(c);

      setTimeout(()=>c.remove(),1500);
    }
  }

  // Abrir sobre
  sobre.addEventListener("click", ()=>{
    if(abiertoFlag) return;
    abiertoFlag = true;

    // Reproducir pop
    pop.currentTime = 0;
    pop.play().catch(()=>{}); // evitar bloqueo m√≥vil

    // Animaci√≥n 3D
    sobre.style.transform = "rotateX(180deg)";

    // Confeti
    setTimeout(()=>lanzarConfeti(), 500);

    // Cerrar pantalla
    setTimeout(()=>{
      inicio.style.opacity = "0";
      setTimeout(()=>{
        inicio.style.display = "none";
      },800);
    }, 1500);
  });
</script>

<style>
  .confeti {
    position: fixed;
    pointer-events: none;
    will-change: transform, opacity;
    z-index: 999999999;
    animation: confetiExplota var(--duracion) ease-out forwards;
    transform-origin: center;
  }

  @keyframes confetiExplota {
    0% {
      opacity: 1;
      transform: translate3d(0,0,0) scale(0.4) rotate(0deg);
    }
    40% {
      opacity: 1;
      transform: translate3d(var(--x-mid), var(--y-mid), 0) scale(1.2) rotate(180deg);
    }
    100% {
      opacity: 0;
      transform: translate3d(var(--x-end), var(--y-end), 0) scale(0.7) rotate(400deg);
    }
  }

  /* Sparkles dorados (estrellas brillantes) */
  .sparkle {
    position: fixed;
    width: 6px;
    height: 6px;
    background: radial-gradient(circle, #fffbd1, #ffd55e, #ffca3a);
    border-radius: 50%;
    pointer-events: none;
    opacity: 0;
    animation: sparkleAnim var(--duracion) ease-out forwards;
    z-index: 999999999;
  }

  @keyframes sparkleAnim {
    0% { opacity: 1; transform: scale(0.4); }
    50% { opacity: 1; transform: scale(1.4); }
    100% { opacity: 0; transform: scale(0); }
  }

  /* Glitter flotando */
  .glitter {
    position: fixed;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: linear-gradient(45deg, #fff7d4, #ffe08a);
    opacity: 0;
    pointer-events: none;
    animation: glitterFloat 2s ease-in-out forwards;
  }

  @keyframes glitterFloat {
    0% { opacity: 0; transform: translateY(0) scale(0.5); }
    40% { opacity: 1; }
    100% { opacity: 0; transform: translateY(-60px) scale(1.4) rotate(45deg); }
  }
</style>
<script>
function lanzarConfeti() {
  const centroX = window.innerWidth / 2;
  const centroY = window.innerHeight / 2;

  const cantidadConfeti = 120;
  const cantidadSparkles = 40;
  const cantidadGlitter = 50;

  /* ========== üéâ CONFETI EXPLOSI√ìN EN C√çRCULO ========== */
  for (let i = 0; i < cantidadConfeti; i++) {
    const c = document.createElement("div");
    c.classList.add("confeti");

    const angulo = (Math.PI * 2 * i) / cantidadConfeti;
    const fuerza = 80 + Math.random() * 140;

    const xMid = Math.cos(angulo) * (fuerza * 0.4);
    const yMid = Math.sin(angulo) * (fuerza * 0.4);

    const xEnd = Math.cos(angulo) * fuerza;
    const yEnd = Math.sin(angulo) * fuerza;

    c.style.setProperty("--x-mid", xMid + "px");
    c.style.setProperty("--y-mid", yMid + "px");
    c.style.setProperty("--x-end", xEnd + "px");
    c.style.setProperty("--y-end", yEnd + "px");

    c.style.left = centroX + "px";
    c.style.top = centroY + "px";

    // Colores rosa + dorado
    const colores = [
      "#ff8fc7", "#ffb6d9", "#ffcee6", "#ffc1da",
      "#ffd55e", "#ffca3a", "#ffe08a"
    ];
    c.style.background = colores[Math.floor(Math.random()*colores.length)];

    // Tama√±o
    const tama√±o = 8 + Math.random()*20;
    c.style.width = tama√±o + "px";
    c.style.height = tama√±o + "px";

    // Bordes (c√≠rculo, estrella-ish)
    const formas = ["50%", "0%", "20% 50%", "50% 20%"];
    c.style.borderRadius = formas[Math.floor(Math.random()*formas.length)];

    // Duraci√≥n
    c.style.setProperty("--duracion", (1.4 + Math.random()*1.2).toFixed(2) + "s");

    document.body.appendChild(c);
    setTimeout(()=>c.remove(), 2500);
  }

  /* ========== ‚ú® SPARKLES DORADOS (ESTRELLITAS) ========== */
  for (let i = 0; i < cantidadSparkles; i++) {
    const s = document.createElement("div");
    s.classList.add("sparkle");

    s.style.left = (centroX + Math.random()*120 - 60) + "px";
    s.style.top  = (centroY + Math.random()*120 - 60) + "px";

    s.style.setProperty("--duracion", (0.8 + Math.random()*0.8).toFixed(2) + "s");

    document.body.appendChild(s);
    setTimeout(()=>s.remove(), 2000);
  }

  /* ========== üåü GLITTER FLOTANTE ========== */
  for (let i = 0; i < cantidadGlitter; i++) {
    const g = document.createElement("div");
    g.classList.add("glitter");

    g.style.left = (centroX + Math.random()*200 - 100) + "px";
    g.style.top  = (centroY + Math.random()*200 - 100) + "px";

    document.body.appendChild(g);
    setTimeout(()=>g.remove(), 2000);
  }
}
</script>
 

</body>
</html>
